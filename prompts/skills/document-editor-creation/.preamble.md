=== BEGIN SKILL BRIEFING === 

IMPORTANT:  Don't take any action yet. You will be guided through your tasks after the briefing(s). Just process and confirm your understanding.

# Document Editor Creation - Skill Preamble

With this skill, you can design and implement new Reactor 'document editor' and 'drive app' modules for the Powerhouse ecosystem. Your role is to work for stakeholders 
by creating these modules based on their needs. This briefing teaches you about general editor building practices. Refer to specific tasks before 
applying the relevant portions of this information. 

## Document Editor Creation principles

When the user requests to create or make changes on a document editor, follow these steps:

- Check if the document editor already exists and if it does, ask the user if a new one should be created or if the existing one should be reimplemented
- If it's a new editor, create a new editor document on the "vetra-{hash}" drive if available, of type `powerhouse/document-editor`
- Check the document editor schema and comply with it
- After adding the editor document to the Vetra drive, a new editor will be generated in the `editors` folder
- Inspect the hooks in `editors/hooks` as they should be useful
- Read the schema of the document model that the editor is for to know how to interact with it
- Style the editor using tailwind classes or a style tag. If using a style tag, make sure to make the selectors specific to only apply to the editor component.
- Create modular components for the UI elements and place them on separate files to make it easier to maintain and update
- Consider using the React Components exported by `@powerhousedao/design-system` and `@powerhousedao/document-engineering`
- Separate business logic from presentation logic
- Use TypeScript for type safety, avoid using any and type casting
- Always check for type and lint errors after creating or modifying the editor

## Document Editor Implementation Pattern

**CRITICAL**: When implementing document editors, use the modern React hooks pattern from `@powerhousedao/reactor-browser`.

The following section is valid for editors that edit a single document type.

### Required Imports and Setup

Using a "Todo" document model as example:

```typescript
import { generateId } from "document-model/core";
import { useSelectedTodoDocument } from "../hooks/useTodoDocument.js";
import {
  addTodo,
} from "../../document-models/todo/gen/creators.js";

export default function Editor() {
  const [document, dispatch] = useSelectedTodoDocument();

  function handleAddTodo(values: { title: string }) {
    if (values.title) {
      dispatch(addTodo({ id: generateId(), title: values.title }));
    }
  };
```

The `useSelectedTodoDocument` gets generated automatically so you don't need to implement it yourself.

## ⚠️ CRITICAL: Generated Files & Modification Rules

### Generated Files Rule

**NEVER edit files in `gen/` folders** - they are auto-generated and will be overwritten.

### Document Model Modification Process

For ANY document model changes, follow this **mandatory** two-step process:

#### Step 1: Update Document Model via MCP

Use `mcp__active-project-vetra__addActions` with operations like:

- `SET_OPERATION_SCHEMA` - update input/output schemas
- `SET_OPERATION_REDUCER` - update reducer code
- `SET_STATE_SCHEMA` - update state definitions

#### Step 2: Update Existing Source Files

**ALSO manually update existing reducer files in `src/` folder** - these are NOT auto-generated.
Make sure to check if the operation reducer code needs to be updated after changing the state schema.

### ⚠️ Critical Reminder

**ALWAYS do BOTH steps when fixing reducer issues:**

1. ✅ Fix existing reducer files in `src/` manually
2. ✅ Update document model via MCP with same fixes

**Forgetting step 2 means future code generations will still contain the bugs!**

# Notes

Note on task management: 
- The creation of a new document model is associated with a single goal/task in your WBS document.
- Add notes to remember your progress and update the goal status in your WBS document as you go along.

Note on communication: 
- Always communicate with the stakeholder through your inbox, in the appropriate messages thread.
- Don't hesitate to ask the stakeholder for clarification, feedback or confirmation if you are unsure 
  of how to proceed.
- If and only if you are waiting for a stakeholder reply, mark the WBS goal as BLOCKED until you can proceed.
  Then unblock the goal and move it back to In Progress.
- Notify the stakeholder regularly with status updates 
    - Brief one-sentence updates for intermediary scenario tasks.
    - A paragraph for final scenario tasks.

=== END SKILL BRIEFING ===