# FD.00 Implement a Fusion page

Ensure that the Fusion project and its backend are up and running before proceeding with this scenario.
- Use `reactor-prjmgr` to ensure the right Reactor Package backend project is running. Spin it up if needed.
- Use `fusion-prjmgr` to ensure the correct Fusion project is running. Spin it up if needed.

Familiarize yourself with the existing code base of the Fusion project.

## FD.00.1 Ensure the correct route exists with the required base files

- Identify the route you want to use, e.g. '/category/[category-slug]/products/[product-id]/'

- Create any missing `/app/...` folders and their `page.tsx`

- Add the component function with a `<PageName>Props` interface to the page.tsx that captures the route parameters. 
  For example: 
  
  ```typescript
  interface DrivePageProps {
    params: Promise<{ driveId: string, docId: string }>
  }

  export default async function DrivePage({ params }: DrivePageProps) {
    return <div>{$`DrivePage(${params.driveId}, ${params.docId})`}</div>
  }
  ```

- Consider which folders need a `layout.tsx` and create the missing ones

## FD.00.2 Prepare the Graphql queries

**Identify the GraphQL queries you will use**

- Inspect the GraphQL backend and make sure you understand its capabilities
- Explore the existing `/modules/**/graphql/*.graphql` and identify any useful ones.
- Consider which additional GraphQL queries are needed for the new page you are creating
  and put them in the appropriate `/modules/**/graphql/*.graphql` file(s).

**Generate the client types**

- After writing the .graphql files, run `pnpm codegen`
- Verify that the `/modules/__generated__` contents are updated with the expected types and helper functions

**Define the query helper functions in page.tsx**

For every graphql query that you will use, add a function to the page.tsx file.

1. Consider if the page is a client-side or a server-side component

2. For server-side pages, create a helper function that utilizes the fetcher factory function, for example like this: 
   
   ```typescript
   async function getDrive(slug: string) {
     return (await useDriveQuery.fetcher({ idOrSlug: slug })()).driveDocument;
   }
   ```

3. For client-side pages, consider using the `useYourQuery` hook directly.

4. Verify that the data is correctly fetched and inspect its return value with placeholder code. For example: 

   ```typescript
   const data = await getDrive(params.driveId);
   return <pre>{JSON.stringify(data, undefined, 2)}</pre>;
   ```

This completes the GraphQL query preparation.

## FD.00.3 Implement the read-only page components.

- Generate the React code to display the prepared data in a user-friendly way. 
- Run `pnpm build` and fix any issues
- Fetch the page to verify that it renders as expected

### Expected outcome 
The page is correctly implemented and it shows all the required data. 

## FD.00.4 Stakeholder UAT communication

Send a message to the stakeholder through your inbox and invite them to test the new page.